<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Login to Kitchen Sink</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root{
          --bg1:#0f172a; --bg2:#1e293b; --card:rgba(255,255,255,.08); --border:rgba(255,255,255,.14);
          --text:#f1f5f9; --muted:#cbd5e1; --brand:#7c3aed; --accent:#06b6d4;
          --ok:#22c55e; --warn:#f59e0b; --err:#ef4444;
          color-scheme: dark light;
        }
        *{ box-sizing:border-box }
        body{
          margin:0; min-height:100vh; color:var(--text);
          font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
          background:
            radial-gradient(1200px 800px at 10% 10%, #1f2937 0%, transparent 60%),
            radial-gradient(1000px 700px at 90% 20%, #111827 0%, transparent 55%),
            linear-gradient(160deg, var(--bg1), var(--bg2));
          display:grid; place-items:center; padding:2rem;
        }
        .wrap{ width:min(420px, 92vw) }
        .brand{ display:flex; gap:.8rem; align-items:center; justify-content:center; margin-bottom:1rem }
        .logo{
          width:52px; height:52px; border-radius:14px; display:grid; place-items:center;
          font-weight:800; color:#fff;
          background:linear-gradient(135deg,var(--brand),var(--accent));
          box-shadow:0 10px 26px rgba(124,58,237,.35);
        }
        h1{ margin:.2rem 0 .4rem; text-align:center; font-size:1.4rem }
        .muted{ color:var(--muted); text-align:center; margin-bottom:1rem }

        .card{ background:var(--card); border:1px solid var(--border);
          border-radius:18px; padding:1.2rem; backdrop-filter: blur(10px);
          box-shadow:0 10px 30px rgba(0,0,0,.20); }

        label{ display:block; font-weight:600; font-size:.95rem; margin:.2rem 0 .35rem }
        .row{ margin-bottom:.9rem }
        input[type="text"], input[type="password"]{
          width:100%; padding:.85rem .95rem; color:var(--text);
          background:rgba(255,255,255,.06); border:1px solid var(--border); border-radius:12px; outline:none;
        }
        input:focus{ border-color:rgba(124,58,237,.7); box-shadow:0 0 0 3px rgba(124,58,237,.25) }

        .pwd-wrap{ position:relative }
        .toggle{
          position:absolute; inset:0 8px 0 auto; width:auto; display:grid; place-items:center;
          border:0; background:transparent; color:var(--muted); cursor:pointer; padding:0 .3rem;
        }

        .btn-primary{
          width:100%; border:0; border-radius:12px; padding:.85rem 1rem; font-weight:800; cursor:pointer;
          background:linear-gradient(135deg,var(--brand),var(--accent)); color:#fff;
          box-shadow:0 10px 22px rgba(124,58,237,.35);
        }
        .btn-primary:disabled{ opacity:.7; cursor:not-allowed }

        .alert{
          margin:.6rem 0 0; padding:.65rem .8rem; border-radius:12px; font-size:.95rem;
          border:1px solid transparent;
        }
        .alert-err{ background:rgba(239,68,68,.12); border-color:rgba(239,68,68,.35); color:#fecaca }
        .alert-ok{ background:rgba(34,197,94,.12); border-color:rgba(34,197,94,.35); color:#bbf7d0 }

        .footer{ margin-top:1rem; display:flex; justify-content:center; gap:.8rem; color:var(--muted); font-size:.95rem }
        .link{ color:#93c5fd; text-decoration:none }
        .link:hover{ text-decoration:underline }
    </style>
</head>
<body>
<div class="wrap">
    <div class="brand">
        <div class="logo">KS</div>
        <div>
            <h1>Login to Kitchen Sink</h1>
            <div class="muted">Welcome back! Please sign in to continue.</div>
        </div>
    </div>

    <div class="card">
        <!-- messages -->
        <div th:if="${param.logout != null}" class="alert alert-ok">You have been logged out.</div>
        <div th:if="${param.error  != null}" class="alert alert-err">Invalid username or password.</div>
        <div th:if="${param.reauth}" class="alert alert-err">
            Admin access required. Please sign in with an admin account.
        </div>

        <form th:action="@{/login}" method="post" onsubmit="document.getElementById('signinBtn').disabled=true;">
            <div class="row">
                <label for="username">Email</label>
                <input id="username" name="username" type="text" autocomplete="username" required
                       placeholder="you@example.com" autofocus>
            </div>

            <div class="row pwd-wrap">
                <label for="password">Password</label>
                <input id="password" name="password" type="password" autocomplete="current-password" required
                       placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                <button class="toggle" type="button" aria-label="Show password" onclick="togglePwd()">üëÅÔ∏è</button>
            </div>

            <!-- carry forward ?redirect=/target from admin-gate -->
            <input type="hidden" name="redirect" th:value="${param.redirect}" />

            <!-- CSRF (rendered only when enabled) -->
            <input type="hidden" th:if="${_csrf != null}"
                   th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <button id="signinBtn" class="btn-primary" type="submit">Sign in</button>
        </form>
    </div>

    <div class="footer">
        <a class="link" href="/" title="Home">‚Üê Back to Home</a>
    </div>
</div>

<script>
    function togglePwd(){
      const i = document.getElementById('password');
      i.type = i.type === 'password' ? 'text' : 'password';
    }
    // caps lock hint (optional)
    document.getElementById('password').addEventListener('keyup', function(e){
      if (!('getModifierState' in e)) return;
      this.title = e.getModifierState('CapsLock') ? 'Caps Lock is ON' : '';
    });
</script>
</body>
</html>
